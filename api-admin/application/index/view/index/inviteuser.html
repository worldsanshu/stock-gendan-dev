<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>注册</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
    <script src="/static/js/jquery-3.7.0.min.js" type="text/javascript"></script>
    <style>

        * {
            margin: 0;
            padding: 0;

            box-sizing: border-box;
            font-family: "Microsoft Yahei";
        }
        html{
            width: 480px;
            margin: 0 auto;
        }
        img {
            border-style: none;
        }

        button, input {
            font-family: sans-serif;
            font-size: 100%;
            line-height: 1.15;
            margin: 0;
        }

        button, input {
            overflow: visible;
        }

        button {
            text-transform: none;
        }

        [type=submit], button {
            -webkit-appearance: button;
        }

        *, :after, :before {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        :focus {
            outline: none;
        }

        * {
            box-sizing: border-box;
        }

        * {
            touch-action: none;
        }

        .beuBLD {
            background-color: rgb(255, 249, 235);
            min-height: 100%;
        }

        .kbYiAR img {
            max-width: 100%;
        }

        .lfGju {
            margin-bottom: 15px;
            position: relative;
        }

        .kIIpNk {
            display: flex;
            margin-bottom: 20px;
        }

        .hszdDp {
            background-color: rgb(255, 255, 255);
            border: 1px solid rgb(239, 230, 213);
            border-radius: 5px;
            display: inline-flex;
            flex: 1 1 20px;
        }

        .hszdDp .label {
            display: flex;
            width: 30px;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
        }

        .hszdDp .label img {
            -webkit-box-flex: 0;
            flex-grow: 0;
            width: 15px;
        }

        .hszdDp input {
            flex: 1 1 0%;
            font-size: 14px;
            border: none;
            line-height: 35px;
            padding: 3px 5px;
            background-color: transparent;
            color: rgb(0, 0, 0);
        }

        .hszdDp input::placeholder {
            color: rgb(255, 131, 114);
        }

        .fEYPbS {
            width: 120px;
            padding-left: 20px;
        }

        .fEYPbS button {
            width: calc(100%);
        }

        .cvpBck {
            background-color: rgb(255, 63, 76);
            display: inline-block;
            width: auto;
            height: 100%;
            min-height: 26px;
            border: none;
            color: rgb(255, 255, 255);
            font-size: 14px;
            text-align: center;
            padding: 0px 10px;
            border-radius: 6px;
            box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 1px;
        }

        .kLFsAW {
            position: relative;
            width: 80%;
            margin: -40px auto 0px;
        }

        .Hkisx {
            background-color: rgb(255, 63, 76);
            color: rgb(255, 255, 255);
            width: 100%;
            border: none;
            border-radius: 5px;
            line-height: 44px;
            margin-top: 10px;
            font-size: 16px;
            box-shadow: rgb(255, 69, 0) 0px 4px 0px;
        }

        .Hkisx::before {
            content: " ";
        }

        ::selection {
            background: #21B384;
            color: #fff;
        }

        input {
            border: none;
            outline: none;
            font-size: 14px;
        }

        body {
            background-color: rgb(255, 249, 235);
            min-height: 100%;
        }
    </style>
</head>
<body>

<div class="sc-gqjmRU beuBLD">
    <div class="sc-VigVT kbYiAR"><img src="/static/media/zhuce1@2x.8f7726d0.png" alt="注册推广"></div>
    <div class="sc-chPdSV kLFsAW">
        <div class="sc-jTzLTM lfGju">
            <div class="sc-fjdhpX kIIpNk">
                <div class="sc-jzJRlG hszdDp"><span class="label"> <img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAfCAMAAAAshTY2AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABhlBMVEXwbUr////wbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUoAAABor/3EAAAAgHRSTlMAAA9Nd4B4ThAfn/mkIlr15fj2XWP6kTIwj2Y0+9spJ9j8OMnmGhjizgE+R0KQ0cuXx4J9zeBcWFlW53t1mcO/nkw6UALUDQvQ3AQUEsBKf+hrEWmDfP1+CersbUTesMLdSHrXaBwbZYjuXo4gHdMk3xX3qC4l/pKKF4fIt0+EX0bzwmAAAAABYktHRIESuq7+AAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4gcMCg8CC6+LtAAAAW9JREFUKM9t0mdTAjEQBuBEwK7YGweIDc+CDUVRsQEq1rOcWMDee+/6/nRzKEeCtx8ymzzJTLIbQlKRYTJbMrOyaSpSlpObBy3y8gv+a6FVk6JiNpaUpmsZUF5RyZKqarahRlSbBLsjkVHqrIWrTtB6NDSSP6VNbjTLnLYAJqIrbQXaOG2Hh3BKO9DJaRe6Be2Bl9Ne9AnqQwOnbvQLOgA/px0YFHQIHk6HERB0BKOcjgHjnNqACU6DtQiFdZ2cwnSErxV7f2DmT2fngHmxCwvAorKkNXnZD6ykd3BVBaTQXEgC1LX0DkaVdSRjYzMq6lZMW44F4ts7WtK7y6m8x1b2Dw4Ttzo69rKZRdb1BDg9C+ovkn0bwHlSj9nBC6FWl1eA8qvXVtw0EUHprR13zoTew2UjaUofyhHX9PEJz+Sf0hfAQbUqqZcG+irhjek7RoiB0g/2e0jkDhZDzYQUJWEViqF+AkeE+L7Chhoxf9MfhF5gNvHSSmUAAAAASUVORK5CYII="
                        alt="icon"></span><input id="phoneNumber" type="phone" placeholder="请输入11位中国大陆手机号">
                </div>
            </div>
            <div class="sc-fjdhpX kIIpNk">
                <div class="sc-jzJRlG hszdDp"><span class="label"> <img
                        src="data:image/png;base64,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"
                        alt="icon"></span><input id="code" placeholder="请输入短信验证码"></div>
                <div class="sc-cSHVUG fEYPbS">
                    <button id="sendButton" class="sc-kAzzGY cvpBck">获取验证码</button>
                </div>
            </div>
            <div class="sc-fjdhpX kIIpNk">
                <div class="sc-jzJRlG hszdDp"><span class="label"> <img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAcCAMAAABS8b9vAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA21BMVEXwbUr////wbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUoAAADMqwplAAAAR3RSTlMAADmKr8C/qXckEbGoFw7T7bq56eEmpuhfBwJR5NsPOMkVFtWWneP1/B7qb316H/SJOgVVnCFTYAo0veLQwrugtsW1sLjHN3gnvmgAAAABYktHREjwAtTqAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4gcMCg8CC6+LtAAAAL1JREFUKM/V0FcWgjAQheGxoIK9YC/Ye+8Idr3735EYUARxAf4vOed7mElCpOf2eDmfP8CTi6WjEIRRKGxyJKpBLJ5IakdKfHMayGRzRPlCESiVDa4AUlWfVqsDDYObaAnGZuLb6HR17qFP7wbAkPEIEE0WxpgwngIzk13zxZLxCqAPft17/ZM3X7yVd0BUscRVSIZDKinA/mDpCCgan4isK8+ML3Y+/AdLdr4yxu1iSX0+3uf8VXdO+UqdPgCzWUFuijRouQAAAABJRU5ErkJggg=="
                        alt="icon"></span><input type="password" id="password" placeholder="请输入您的登录密码"></div>
            </div>
            <div class="sc-fjdhpX kIIpNk">
                <div class="sc-jzJRlG hszdDp"><span class="label"> <img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAcCAMAAABS8b9vAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA21BMVEXwbUr////wbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUrwbUoAAADMqwplAAAAR3RSTlMAADmKr8C/qXckEbGoFw7T7bq56eEmpuhfBwJR5NsPOMkVFtWWneP1/B7qb316H/SJOgVVnCFTYAo0veLQwrugtsW1sLjHN3gnvmgAAAABYktHREjwAtTqAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4gcMCg8CC6+LtAAAAL1JREFUKM/V0FcWgjAQheGxoIK9YC/Ye+8Idr3735EYUARxAf4vOed7mElCpOf2eDmfP8CTi6WjEIRRKGxyJKpBLJ5IakdKfHMayGRzRPlCESiVDa4AUlWfVqsDDYObaAnGZuLb6HR17qFP7wbAkPEIEE0WxpgwngIzk13zxZLxCqAPft17/ZM3X7yVd0BUscRVSIZDKinA/mDpCCgan4isK8+ML3Y+/AdLdr4yxu1iSX0+3uf8VXdO+UqdPgCzWUFuijRouQAAAABJRU5ErkJggg=="
                        alt="icon"></span><input type="password" id="password2" placeholder="请重复输入登录密码"></div>
            </div>
            <input type="submit" id="reg" class="sc-kgoBCf Hkisx" value="立即注册"></div>
    </div>
</div>

<script>
    $(document).ready(function () {
        var countdown = 60;
        var timer;
        const urlParams = new URLSearchParams(window.location.search);
        const recom_id = urlParams.get('recom_id')??{$recom_id}; // 获取 name 参数的值 'John'
        const appdown ='{$appdown}'
        console.log(recom_id);

        function startTimer() {
            $('#sendButton').prop('disabled', true);
            timer = setInterval(function () {
                countdown--;
                $('#sendButton').text('重新发送 (' + countdown + ')');
                if (countdown <= 0) {
                    clearInterval(timer);
                    $('#sendButton').prop('disabled', false).text('发送验证码');
                    countdown = 60;
                }
            }, 1000);
        }

        function hasLetter(str) {
            return /[a-zA-Z]/.test(str);
        }

        $('#reg').click(function () {
            var phoneNumber = $('#phoneNumber').val().trim();
            if (phoneNumber === '' || phoneNumber.length !== 11) {
                alert('请输入正确的手机号');
                return;
            }

            var code = $('#code').val().trim();
            if (code === '') {
                alert('请输入验证码');
                return;
            }
            var password = $('#password').val().trim();
            if (password === '') {
                alert('请输入密码');
                return;
            }
            var password2 = $('#password2').val().trim();
            if (password2 === '') {
                alert('请输入重复密码');
                return;
            }
            if (!hasLetter(password) || password.length < 6) {
                alert('密码必须包含字母且长度大于6位');
                return;
            }
            if (password2 !== password) {
                alert('两次密码不一样');
                return;
            }
            $.ajax({
                url: '/apicom/user/register', // 替换为你的API端点
                type: 'POST',
                data: {
                    mobile: phoneNumber,
                    password: password,
                    re_password: password2,
                    recom_id: recom_id,
                    sms_code: code,
                },
                success: function (response) {
                    var jsonObject = JSON.parse(response);

                    if (jsonObject.status != 1) {
                        return alert(jsonObject.message);
                    }
                    // 假设发送成功

                    // var userConfirmed = window.confirm("注册成功,将跳转至APP下载页？");
                    // if (userConfirmed) {
                        window.location.href =appdown;
                    // } else {
                    //     $('input[type="text"]').val('');
                    //     // alert("操作已取消");
                    // }
                },
                error: function () {
                    alert('注册失败，请重试');
                }
            });
        })
        $('#sendButton').click(function () {
            var phoneNumber = $('#phoneNumber').val().trim();
            if (phoneNumber === '' || phoneNumber.length !== 11) {
                alert('请输入正确的手机号');
                return;
            }

            // 这里是发送验证码的请求逻辑，你需要根据实际情况修改
            $.ajax({
                url: '/apicom/user/sendsms', // 替换为你的API端点
                type: 'POST',
                data: {
                    mobile: phoneNumber,
                    template: 'sms_tp01'
                },
                success: function (response) {
                    // 假设发送成功
                    alert('验证码发送成功');
                    startTimer();
                },
                error: function () {
                    alert('验证码发送失败，请重试');
                }
            });
        });
    });
</script>
</body>
</html>