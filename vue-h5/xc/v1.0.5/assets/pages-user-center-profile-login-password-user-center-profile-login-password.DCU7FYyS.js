import{R as e,T as o,V as r,U as t,x as a,D as s,H as l,Y as d,z as i,F as n,B as p,C as u,Z as m,aX as w,q as c}from"./index-DugkB_-4.js";import{_ as g}from"./uni-nav-bar.DGUi_IvM.js";import{r as b}from"./uni-app.es.CX-CC-lz.js";import{_ as f}from"./u-input.UpaywbSH.js";import{_,a as x}from"./u-form.MzjK-z7U.js";import{_ as h}from"./u-button.D_9ELcMi.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.D9BxN9k6.js";import"./uni-status-bar.D_XiF9iL.js";import"./u-icon.Ca1c56qc.js";import"./u-line.BpwwmqXn.js";import"./u-loading-icon.CCS9DSWM.js";const P=j(Object.assign({name:"user-center-profile-login-password"},{__name:"user-center-profile-login-password",setup(j){const{t:P}=e(),y=o(),V=r(),k=t({oldpwd:"",newpwd:"",subpwd:""}),v={oldpwd:{type:"string",required:!0,message:P("loginPassword.text.errorTip1"),trigger:["blur","change"]},newpwd:{type:"string",required:!0,message:P("loginPassword.text.errorTip2"),trigger:["blur","change"]},subpwd:[{type:"string",required:!0,message:P("loginPassword.text.errorTip3"),trigger:["blur","change"]},{validator:(e,o)=>o===k.newpwd,message:P("loginPassword.text.errorTip4"),trigger:["change","blur"]}]};async function q(){try{await V.value.validate();const e=await w(k);if(e.error)return void c({title:e.message,icon:"none",duration:1e3});c({title:"修改成功，请重新登录",icon:"none",duration:1e3,mask:!0}),setTimeout((()=>{y.logout()}),1500)}catch(e){e.length&&await c({title:e[0].message,icon:"none"})}}return(e,o)=>{const r=b(a("uni-nav-bar"),g),t=b(a("up-input"),f),w=b(a("up-form-item"),_),c=b(a("up-form"),x),j=b(a("up-button"),h),P=p;return u(),s(n,null,[l(r,{title:e.$t("page.title.loginPassword"),"status-bar":"","left-icon":"left","background-color":"#F8F8F8",fixed:"",border:!1,onClickLeft:d(m)},null,8,["title","onClickLeft"]),l(P,{class:"body"},{default:i((()=>[l(c,{class:"form","label-width":"120",labelPosition:"top",model:k,rules:v,ref_key:"formRef",ref:V},{default:i((()=>[l(w,{required:"","left-icon":"lock",label:e.$t("loginPassword.text.oldPassword"),prop:"oldpwd",borderBottom:""},{default:i((()=>[l(t,{type:"password",modelValue:k.oldpwd,"onUpdate:modelValue":o[0]||(o[0]=e=>k.oldpwd=e),placeholder:v.oldpwd.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),l(w,{required:"","left-icon":"lock",label:e.$t("loginPassword.text.newPassword"),prop:"newpwd",borderBottom:""},{default:i((()=>[l(t,{type:"password",modelValue:k.newpwd,"onUpdate:modelValue":o[1]||(o[1]=e=>k.newpwd=e),placeholder:v.newpwd.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),l(w,{required:"","left-icon":"lock",label:e.$t("loginPassword.text.confirmPassword"),prop:"subpwd",borderBottom:""},{default:i((()=>[l(t,{type:"password",modelValue:k.subpwd,"onUpdate:modelValue":o[2]||(o[2]=e=>k.subpwd=e),placeholder:v.subpwd[0].message},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),l(j,{class:"mt-100",color:"rgb(255, 69, 0)",text:e.$t("common.text.submit"),onClick:q},null,8,["text"])])),_:1})],64)}}}),[["__scopeId","data-v-40b3e558"]]);export{P as default};
