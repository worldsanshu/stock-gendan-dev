import{T as a,V as t,ai as e,ae as l,x as s,y as o,z as n,A as u,C as r,H as i,I as d,J as c,Y as m,ar as _,G as f,D as v,E as y,F as p,q as x,B as g,r as k}from"./index-CUCz9quq.js";import{_ as b}from"./u-empty.DLEGJmsq.js";import{o as $,a as h,r as j}from"./uni-app.es.B7l1sWMt.js";import{_ as I}from"./u-loadmore.CCuLyTg_.js";import{e as w}from"./index.C9vdFH2i.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.C7YV5ppE.js";import"./u-line.DX81QOA9.js";import"./u-loading-icon.Dqx9PYiW.js";const A=C(Object.assign({name:"trade"},{__name:"trade",setup(C){const A=a(),F=t([]),N=t(0),O=t(0),S=t(0),U=t(1),T=t(!1),V=t("loadmore"),q=t(0);async function z(){V.value="loading";const{error:a,message:t,data:e}=await w({type:1,page:U.value});if(!a)return{data:e,error:a};await x({title:t,icon:"none"})}async function B(){U.value=1;const{error:a,data:t}=await z();a?V.value="error":(F.value=t.list.data,T.value=!t.list.data.length,V.value=F.value.length<10?"nomore":"loadmore",N.value=t.statistics.total_hold_money,O.value=t.statistics.total_hold_income,S.value=t.statistics.total_yesterday_income,q.value=t.statistics.total_amount_available)}async function D(){if("nomore"===V.value)return;U.value++;const{data:a,error:t}=await z();t?V.value="error":a.length?(V.value="loadmore",F.value=F.value.concat(a)):V.value="nomore"}return $((async()=>{await B(),e()})),h(D),B(),l((()=>A.token),(a=>{a&&B()})),(a,t)=>{const e=r,l=j(s("up-empty"),b),x=j(s("up-loadmore"),I);return o(),n(e,{class:"root"},{default:u((()=>[i(e,{class:"red-block"},{default:u((()=>[i(e,{class:"font-12-inverse"},{default:u((()=>[d(c(a.$t("trade.text.amountAvailable"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),i(e,{class:"font-30-inverse"},{default:u((()=>[d(c(q.value.toFixed(2)),1)])),_:1}),i(e,{class:"data-row"},{default:u((()=>[i(e,{class:"data-item"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(a.$t("trade.text.totalInvestmentAmount"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),i(e,null,{default:u((()=>[d(c(Number(N.value).toFixed(2)),1)])),_:1})])),_:1}),i(e,{class:"data-item"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(a.$t("trade.text.cumulativeIncome")),1)])),_:1}),m(_)(O.value)>0?(o(),n(e,{key:0},{default:u((()=>[d(c(m(_)(O.value)),1)])),_:1})):f("",!0),m(_)(O.value)<0?(o(),n(e,{key:1,style:{color:"rgb(6, 159, 23)"}},{default:u((()=>[d(c(m(_)(O.value)),1)])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1}),F.value.length?(o(),n(e,{key:0,class:"list-box"},{default:u((()=>[i(e,{class:"list-header"},{default:u((()=>[d(c(a.$t("trade.text.myOrder")),1)])),_:1})])),_:1})):f("",!0),i(e,{class:"list"},{default:u((()=>[(o(!0),v(p,null,y(F.value,(t=>(o(),n(e,{class:"list-item",key:t,onClick:a=>async function(a){console.log("触发了事件！"),k({url:`/pages/asset-details/asset-details?id=${a}`})}(t.id)},{default:u((()=>[i(e,{class:"list-item-header"},{default:u((()=>[3===t.order_type?(o(),n(e,{key:0,style:{color:"#ff7d00"}},{default:u((()=>[d(c(a.$t("common.text.oneClickSmartInvestment")),1)])),_:1})):(o(),n(e,{key:1},{default:u((()=>[d(c(a.$t("common.text.dailySmartInvestment")),1)])),_:1})),i(e,{class:"mnis"},{default:u((()=>[d(c(a.$t("trade.text.orderNumber"))+c(t.order_sn),1)])),_:2},1024)])),_:2},1024),i(e,{style:{display:"flex"}},{default:u((()=>[i(e,{class:"list-item-col font-14"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(t.money?t.money:0),1)])),_:2},1024),i(e,null,{default:u((()=>[d(c(a.$t("trade.text.followUpInvestmentAmount")),1)])),_:1})])),_:2},1024),i(e,{class:"list-item-col"},{default:u((()=>[i(e,null,{default:u((()=>[i(e,{class:g([t.balance&&t.balance<0?"on":""])},{default:u((()=>[d(c(m(_)(t.balance)),1)])),_:2},1032,["class"]),i(e,{class:g([t.earning_rate&&t.earning_rate<0?"on":""])},{default:u((()=>[d(c(t.earning_rate)+"%",1)])),_:2},1032,["class"])])),_:2},1024),i(e,null,{default:u((()=>[d(c(a.$t("trade.text.holdingIncome")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),T.value?(o(),n(l,{key:1,mode:"data",icon:"/static/empty/empty-data.png"})):f("",!0),T.value?f("",!0):(o(),n(x,{key:2,status:V.value,onClick:D},null,8,["status"]))])),_:1})}}}),[["__scopeId","data-v-09606a2b"]]);export{A as default};
