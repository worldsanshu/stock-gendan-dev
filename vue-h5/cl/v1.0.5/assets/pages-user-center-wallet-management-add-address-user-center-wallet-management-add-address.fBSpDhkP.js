import{R as e,V as a,U as t,x as l,y as o,D as s,H as n,Y as r,A as i,F as d,q as u,cf as c,C as m,Z as p,z as f,G as b,b3 as _}from"./index-_qVRbLMl.js";import{_ as g}from"./uni-nav-bar.CqtfX-i-.js";import{r as k}from"./uni-app.es.CwLmRD9h.js";import{_ as v}from"./u-input.CrhwEoxg.js";import{_ as x,a as y}from"./u-form.D51hNWnV.js";import{_ as h}from"./u-upload.fgNqZZmJ.js";import{_ as w}from"./uni-section.DcNh2fp6.js";import{_ as j}from"./u-button.BhmJCeJ7.js";import{_ as V}from"./u-picker.CYU8phf3.js";import{d as T,k as C}from"./wallet.CrnvYlvL.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.CkUbBeV1.js";import"./uni-status-bar.BBpSB2OF.js";import"./u-icon.WTlR_o2P.js";import"./u-line.xBYwZJD9.js";import"./u-loading-icon.C0chiosN.js";import"./u-popup.CU0Onh68.js";import"./u-transition.D61Fk1Af.js";import"./u-status-bar.DVnN7CDW.js";const F=q(Object.assign({name:"user-center-wallet-management-add-address"},{__name:"user-center-wallet-management-add-address",setup(q){const{t:F}=e(),L=a(!1),$=a([[]]),A=a(),U=a([]),R=a([]),D=a([]),P=a([[]]),B=a(!1),G=a(!1),H=t({id:"",idText:"",alias:"",address:"",payment_code:"",bank_text:"",bank_code:"",bank_owner:"",bank_number:""}),I=a(""),S={idText:{type:"string",required:!0,message:"请选择钱包/币种",trigger:["blur","change"]},alias:{type:"string",required:!0,message:F("addAddress.text.tip2"),trigger:["blur","change"]},address:{type:"string",required:!0,message:F("addAddress.text.tip3"),trigger:["blur","change"]},bank_code:{type:"string",required:!0,message:"请选择开户银行",trigger:["blur","change"]},bank_owner:{type:"string",required:!0,message:"请输入开户姓名",trigger:["blur","change"]},bank_number:{type:"string",required:!0,message:"请输入卡号",trigger:["blur","change"]}};async function Y(){if("code"!==I.value||""!==H.address||""!==H.payment_code)if("address"!==I.value||""!==H.address)if("bank"!==I.value||""!==H.bank_number)try{await A.value.validate();const{error:e,message:a}=await C(H);await u({title:a,icon:e?"none":"success",duration:1e3}),e||setTimeout(p,1e3)}catch(e){e.length&&await u({title:e[0].message,icon:"none"})}else u({title:"请输入卡号!",icon:"none"});else u({title:"请输入收款地址!",icon:"none"});else u({title:"请输入收款地址或上传收款码!",icon:"none"})}async function Z(e){H.id=e.value[0].id,H.idText=e.value[0].name,I.value=e.value[0].WithdrawalTypeSelect,L.value=!1}function z(e){H.bank_text=e.value[0].name,H.bank_code=e.value[0].id,B.value=!1}return async function(){const{error:e,message:a,data:t}=await T({type:"wallet"});e?await u({title:a,icon:"none"}):$.value=[t.list]}(),async function(){const{error:e,message:a,data:t}=await c();e?await u({title:a,icon:"none"}):P.value=[t.bank]}(),(e,a)=>{const t=k(l("uni-nav-bar"),g),c=k(l("up-input"),v),T=k(l("up-form-item"),x),C=k(l("up-form"),y),q=k(l("up-upload"),h),E=m,J=k(l("uni-section"),w),N=k(l("up-button"),j),O=k(l("up-picker"),V);return o(),s(d,null,[n(t,{title:e.$t("page.title.addAddress"),border:!1,"status-bar":"","background-color":"#ff3c36",color:"#fff","left-icon":"left",fixed:"",onClickLeft:r(p)},null,8,["title","onClickLeft"]),n(E,{class:"body"},{default:i((()=>[n(C,{model:H,rules:S,"border-bottom":"",class:"form","label-width":"120",labelPosition:"top",ref_key:"formRef",ref:A},{default:i((()=>[n(T,{required:"",label:"钱包/币种",prop:"idText"},{default:i((()=>[n(c,{placeholder:S.idText.message,modelValue:H.idText,"onUpdate:modelValue":a[0]||(a[0]=e=>H.idText=e),type:"text","disabled-color":"#fff","placeholder-style":"color: '#333'","suffix-icon":"arrow-down",onClick:a[1]||(a[1]=e=>L.value=!0)},null,8,["placeholder","modelValue"])])),_:1}),"address"===I.value||"code"===I.value?(o(),f(T,{key:0,required:"",label:e.$t("addAddress.text.aliases"),prop:"alias"},{default:i((()=>[n(c,{placeholder:S.alias.message,modelValue:H.alias,"onUpdate:modelValue":a[2]||(a[2]=e=>H.alias=e),type:"text"},null,8,["placeholder","modelValue"])])),_:1},8,["label"])):b("",!0),"address"===I.value||"code"===I.value?(o(),f(T,{key:1,label:e.$t("addAddress.text.address"),required:"","label-width":"100%"},{default:i((()=>[n(c,{placeholder:S.address.message,modelValue:H.address,"onUpdate:modelValue":a[3]||(a[3]=e=>H.address=e),type:"text"},null,8,["placeholder","modelValue"])])),_:1},8,["label"])):b("",!0),"bank"===I.value?(o(),f(T,{key:2,required:"",label:e.$t("addBankCard.text.bankAccount"),prop:"bank_code"},{default:i((()=>[n(c,{type:"text",modelValue:H.bank_text,"onUpdate:modelValue":a[4]||(a[4]=e=>H.bank_text=e),placeholder:S.bank_code.message,"disabled-color":"#fff","placeholder-style":"color: '#333'","suffix-icon":"arrow-down",onClick:a[5]||(a[5]=e=>B.value=!0)},null,8,["modelValue","placeholder"])])),_:1},8,["label"])):b("",!0),"bank"===I.value?(o(),f(T,{key:3,required:"",label:"姓名",prop:"bank_owner"},{default:i((()=>[n(c,{placeholder:S.bank_owner.message,modelValue:H.bank_owner,"onUpdate:modelValue":a[6]||(a[6]=e=>H.bank_owner=e),type:"text"},null,8,["placeholder","modelValue"])])),_:1})):b("",!0),"bank"===I.value?(o(),f(T,{key:4,label:"卡号",required:"","label-width":"100%",prop:"bank_number"},{default:i((()=>[n(c,{placeholder:S.bank_number.message,modelValue:H.bank_number,"onUpdate:modelValue":a[7]||(a[7]=e=>H.bank_number=e),type:"text"},null,8,["placeholder","modelValue"])])),_:1})):b("",!0)])),_:1},8,["model"]),"code"===I.value?(o(),f(J,{key:0,title:"请上传收款码",type:"line",padding:"0 30rpx"},{default:i((()=>[n(E,{class:"passport-wrapper"},{default:i((()=>[n(q,{maxCount:1,fileList:U.value,onAfterRead:a[8]||(a[8]=e=>async function(e,a){const t="passportFileList"===a?U:"frontFileList"===a?R:D,l="passportFileList"===a?"passport_pic":"frontFileList"===a?"card_pic_hand":"card_pic_back";t.value=[{...e.file,status:"uploading",message:F("verified.text.uploading")}];const o=await _(e.file.url);H.payment_code=o.data.file_path,1===Number(o.status)?(t.value=[{...e.file,status:"success",message:F("verified.text.uploadSuccessFully")}],H.value[l]=o.data.file_path):await u({title:o.message||F("verified.text.uploadFailed"),icon:"none"})}(e,"passportFileList")),onDelete:a[9]||(a[9]=e=>(U.value=[],H.payment_code="")),class:"passport-content mt-50",name:"url"},null,8,["fileList"])])),_:1})])),_:1})):b("",!0),n(N,{text:e.$t("common.text.submit"),class:"mt-30",color:"rgb(255, 69, 0)",onClick:Y},null,8,["text"]),n(O,{ref:"uPickerRef",show:L.value,columns:$.value,cancelText:e.$t("common.text.cancel"),confirmText:e.$t("common.text.confirm"),onCancel:a[10]||(a[10]=e=>L.value=!1),onConfirm:Z,onClose:a[11]||(a[11]=e=>L.value=!1),"close-on-click-overlay":"","key-name":"name"},null,8,["show","columns","cancelText","confirmText"]),n(O,{show:B.value,loading:G.value,"close-on-click-overlay":"",ref:"uPickerRef","key-name":"name",columns:P.value,cancelText:e.$t("common.text.cancel"),confirmText:e.$t("common.text.confirm"),onCancel:a[12]||(a[12]=e=>B.value=!1),onConfirm:z,onClose:a[13]||(a[13]=e=>B.value=!1)},null,8,["show","loading","columns","cancelText","confirmText"])])),_:1})],64)}}}),[["__scopeId","data-v-e5b5da41"]]);export{F as default};
