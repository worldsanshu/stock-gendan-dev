import{R as e,T as a,U as t,V as l,b8 as i,bO as r,ad as s,x as d,y as u,D as o,H as n,Y as p,A as c,F as m,C as f,Z as _,L as v,E as g,z as h,I as b,J as x,G as y,bP as k,q as w,bQ as j,N as V,M as C}from"./index-BpNRNyt1.js";import{_ as F}from"./uni-nav-bar.DzQ3GIPc.js";import{r as L}from"./uni-app.es.DOVXrixg.js";import{_ as $,a as q}from"./u-radio-group.nXu3fUKo.js";import{_ as N}from"./uni-section.yBwT4iCl.js";import{_ as U}from"./u-input.CY9KuzY1.js";import{_ as A,a as D}from"./u-form.AN_bxdAG.js";import{_ as R}from"./u-upload.MTHg_ms6.js";import{_ as B}from"./u-button.gilaSs3u.js";import{_ as Z}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.BdLyHM4-.js";import"./uni-status-bar.BKUrsIDI.js";import"./u-icon.Bew-d3Qt.js";import"./u-line.DJkOHe4f.js";import"./u-loading-icon.ByX6rnJ-.js";const O=Z(Object.assign({name:"user-center-profile-real-name-authentication"},{__name:"user-center-profile-real-name-authentication",props:{id_auth:String,id_card:String},setup(Z){const{t:O}=e(),P=Z,S=a(),z=t([{label:O("verified.text.idCardAuthentication"),name:"idCard"},{label:O("verified.text.passportAuthentication"),name:"passport"}]),E=l(z[0].name),I=l(),T=l({card_pic_hand:"",card_pic_back:"",passport_pic:"",auth_type:0,name:"",id_card:"",bank_card:"",examine_type:1}),W={name:{type:"string",required:!0,message:O("verified.text.tip4"),trigger:["blur","change"]},bank_card:{type:"string",required:!0,message:O("verified.text.tip5"),trigger:["blur","change"]},id_card:[{type:"string",required:!0,message:O("verified.text.tip6"),trigger:["blur","change"]},{validator:(e,a)=>"idCard"===E.value?i.idCard(a):r(a),message:O("verified.text.tip7"),trigger:["blur","change"]}],card_pic_hand:{type:"string",required:!0,message:O("verified.text.tip8"),trigger:["blur","change"]},card_pic_back:{type:"string",required:!0,message:O("verified.text.tip9"),trigger:["blur","change"]},passport_pic:{type:"string",required:!0,message:O("verified.text.tip10"),trigger:["blur","change"]}},Y=l([]),G=l([]),H=l([]);let J=l("");async function M(e,a){const t="passportFileList"===a?Y:"frontFileList"===a?G:H,l="passportFileList"===a?"passport_pic":"frontFileList"===a?"card_pic_hand":"card_pic_back";t.value=[{...e.file,status:"uploading",message:O("verified.text.uploading")}];const i=await k(e.file.url);1===Number(i.status)?(t.value=[{...e.file,status:"success",message:O("verified.text.uploadSuccessFully")}],T.value[l]=i.data.file_path):await w({title:i.message||O("verified.text.uploadFailed"),icon:"none"})}async function Q(){try{if(0===T.value.auth_type&&"0"===P.id_auth&&await I.value.validate(),0===T.value.auth_type&&"2"===P.id_auth&&""===T.value.name)return await w({title:"请填写真实姓名!",icon:"none"}),!1;if(0===T.value.auth_type&&"2"===P.id_auth&&0===G.value.length||0===T.value.auth_type&&"2"===P.id_auth&&0===H.value.length)return await w({title:"请上传完整的身份证!",icon:"none"}),!1;if(1===T.value.auth_type&&0===Y.value.length)return await w({title:"请上传或护照！",icon:"none"}),!1;const{error:e,message:a}=await j(T.value);await w({title:a,icon:"none"}),e||(await S.refreshUserinfo(),_())}catch(e){e.length&&await w({title:e[0].message,icon:"none"})}}s(E,(e=>{T.value.auth_type="idCard"===e?0:1,T.value.id_card=""}));return P.id_card&&"0"===P.id_auth?J.value="实名中":P.id_card||"0"!==P.id_auth?"2"===P.id_auth?(J.value="重新申请",T.value.examine_type=2):J.value="提交申请":(J.value="去认证",T.value.examine_type=1),(e,a)=>{const t=L(d("uni-nav-bar"),F),l=L(d("up-radio"),$),i=L(d("up-radio-group"),q),r=L(d("uni-section"),N),s=f,k=L(d("up-input"),U),w=L(d("up-form-item"),A),j=L(d("up-form"),D),Z=V,O=L(d("up-upload"),R),S=L(d("up-button"),B);return u(),o(m,null,[n(t,{title:e.$t("page.title.verified"),"status-bar":"","left-icon":"left","background-color":"#F8F8F8",fixed:"",border:!1,onClickLeft:p(_)},null,8,["title","onClickLeft"]),n(s,{class:"body"},{default:c((()=>[v(n(r,{title:e.$t("verified.text.title1"),type:"line"},{default:c((()=>[n(i,{class:"radio-group",modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),placement:"row","icon-placement":"right"},{default:c((()=>[(u(!0),o(m,null,g(z,((e,a)=>(u(),h(l,{style:{flex:"1","justify-content":"center"},key:a,label:e.label,name:e.name},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["title"]),[[C,!1]]),0===T.value.auth_type&&"2"!==P.id_auth?(u(),h(r,{key:0,title:e.$t("verified.text.title2"),type:"line"},{default:c((()=>[n(s,{class:"tip-text"},{default:c((()=>[b(x(e.$t("verified.text.tip1")),1)])),_:1}),n(j,{class:"plr-30","label-width":"120",labelPosition:"top",model:T.value,rules:W,ref_key:"formRef",ref:I},{default:c((()=>[n(w,{"left-icon":"account",label:e.$t("verified.text.actualName"),prop:"name",borderBottom:"",ref:"item1"},{default:c((()=>[n(k,{modelValue:T.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value.name=e),placeholder:W.name.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),n(w,{"left-icon":"lock",label:e.$t("verified.text.idNumber"),prop:"id_card",borderBottom:"",ref:"item1"},{default:c((()=>[n(k,{type:"idcard",modelValue:T.value.id_card,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value.id_card=e),placeholder:W.id_card[0].message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),n(w,{"left-icon":"lock",label:e.$t("verified.text.bankCardNumber"),prop:"bank_card",borderBottom:"",ref:"item1"},{default:c((()=>[n(k,{type:"idcard",modelValue:T.value.bank_card,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value.bank_card=e),placeholder:W.bank_card.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title"])):y("",!0),"idCard"===E.value&&"2"===P.id_auth?(u(),h(r,{key:1,title:"请上传身份证的正反面",type:"line",padding:"30rpx"},{default:c((()=>[n(j,{"label-width":"120",labelPosition:"top",model:T.value},{default:c((()=>[n(w,{"left-icon":"account",label:e.$t("verified.text.actualName"),prop:"name",borderBottom:"",ref:"item1"},{default:c((()=>[n(k,{modelValue:T.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>T.value.name=e),placeholder:W.name.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),n(s,{class:"uploads"},{default:c((()=>[n(O,{class:"uploads-item",width:"750rpx",fileList:G.value,onAfterRead:a[5]||(a[5]=e=>M(e,"frontFileList")),onDelete:a[6]||(a[6]=e=>G.value=[]),name:"url",maxCount:1},{default:c((()=>[n(s,{class:"uploads-item-content"},{default:c((()=>[n(s,{class:"uploads-item__info"},{default:c((()=>[n(s,{class:"font"},{default:c((()=>[b("头像面")])),_:1}),n(s,{class:"font-12 mt-10"},{default:c((()=>[b("上传你的身份证头像面")])),_:1})])),_:1}),n(Z,{class:"uploads-item__image",src:"/assets/id-card-front-CDseaZ7x.png",mode:"widthFix"})])),_:1})])),_:1},8,["fileList"]),n(O,{class:"uploads-item mt-20",width:"750rpx",fileList:H.value,onAfterRead:a[7]||(a[7]=e=>M(e,"backFileList")),onDelete:a[8]||(a[8]=e=>H.value=[]),name:"url",maxCount:1},{default:c((()=>[n(s,{class:"uploads-item-content"},{default:c((()=>[n(s,{class:"uploads-item__info"},{default:c((()=>[n(s,{class:"font-14"},{default:c((()=>[b("国徽面")])),_:1}),n(s,{class:"font-12 mt-10"},{default:c((()=>[b("上传你的身份证国徽面")])),_:1})])),_:1}),n(Z,{class:"uploads-item__image",src:"/assets/id-card-back-Dkz4-chN.png",mode:"widthFix"})])),_:1})])),_:1},8,["fileList"])])),_:1})])),_:1})):y("",!0),1===T.value.auth_type?(u(),h(r,{key:2,title:e.$t("verified.text.tip10"),type:"line",padding:"30rpx"},{default:c((()=>[n(s,{class:"passport-wrapper"},{default:c((()=>[n(s,{class:"font-24-000"},{default:c((()=>[b(x(e.$t("verified.text.tip2")),1)])),_:1}),n(s,{class:"font-12"},{default:c((()=>[b(x(e.$t("verified.text.tip3")),1)])),_:1}),n(O,{width:"564rpx",height:"368rpx",class:"passport-content mt-50",fileList:Y.value,onAfterRead:a[9]||(a[9]=e=>M(e,"passportFileList")),onDelete:a[10]||(a[10]=e=>Y.value=[]),name:"url",maxCount:1},{default:c((()=>[n(Z,{class:"passport-image",src:"/assets/passport-CYf6tEWZ.png",mode:"widthFix"})])),_:1},8,["fileList"])])),_:1})])),_:1},8,["title"])):y("",!0),n(s,{class:"mt-100 p-30"},{default:c((()=>[n(S,{text:p(J),type:"primary",onClick:Q},null,8,["text"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-3d8d5d85"]]);export{O as default};
