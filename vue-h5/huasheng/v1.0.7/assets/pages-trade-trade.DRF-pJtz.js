import{T as a,V as t,aj as e,ae as l,x as s,y as o,z as n,B as u,C as r,H as d,I as i,J as c,Y as m,ar as _,G as f,D as v,E as y,F as p,v as x,A as g,q as k}from"./index-Sr5TDQAh.js";import{_ as $}from"./u-empty.n33QbVpb.js";import{c as b,d as j,r as h}from"./uni-app.es.B63rG-5C.js";import{_ as w}from"./u-loadmore.DVwrKmAI.js";import{e as I}from"./index.DvuIAcF8.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.CLEL_UCr.js";import"./u-line.CzSBNpvZ.js";import"./u-loading-icon.BJj1gzKk.js";const A=C(Object.assign({name:"trade"},{__name:"trade",setup(C){const A=a(),F=t([]),U=t(0),B=t(0),E=t(0),N=t(1),O=t(!1),S=t("loadmore"),V=t(0);async function q(){S.value="loading";const{error:a,message:t,data:e}=await I({type:1,page:N.value});if(!a)return{data:e,error:a};await x({title:t,icon:"none"})}async function z(){N.value=1;const{error:a,data:t}=await q();a?S.value="error":(F.value=t.list.data,O.value=!t.list.data.length,S.value=F.value.length<10?"nomore":"loadmore",U.value=t.statistics.total_hold_money,B.value=t.statistics.total_hold_income,E.value=t.statistics.total_yesterday_income,V.value=t.statistics.total_amount_available)}async function D(){if("nomore"===S.value)return;N.value++;const{data:a,error:t}=await q();t?S.value="error":a.length?(S.value="loadmore",F.value=F.value.concat(a)):S.value="nomore"}return b((async()=>{await z(),e()})),j(D),z(),l((()=>A.token),(a=>{a&&z()})),(a,t)=>{const e=u,l=h(s("up-empty"),$),x=h(s("up-loadmore"),w);return r(),o(e,{class:"root"},{default:n((()=>[d(e,{class:"red-block"},{default:n((()=>[d(e,{class:"font-12-inverse"},{default:n((()=>[i(c(a.$t("trade.text.amountAvailable"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),d(e,{class:"font-30-inverse"},{default:n((()=>[i(c(V.value<0?0:V.value.toFixed(2)),1)])),_:1}),d(e,{class:"data-row"},{default:n((()=>[d(e,{class:"data-item"},{default:n((()=>[d(e,null,{default:n((()=>[i(c(a.$t("trade.text.totalInvestmentAmount"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),d(e,null,{default:n((()=>[i(c(U.value<0?0:Number(U.value).toFixed(2)),1)])),_:1})])),_:1}),d(e,{class:"data-item"},{default:n((()=>[d(e,null,{default:n((()=>[i(c(a.$t("trade.text.cumulativeIncome")),1)])),_:1}),m(_)(B.value)>0?(r(),o(e,{key:0},{default:n((()=>[i(c(m(_)(B.value)),1)])),_:1})):f("",!0),m(_)(B.value)<0?(r(),o(e,{key:1,style:{color:"rgb(6, 159, 23)"}},{default:n((()=>[i(c(m(_)(B.value)),1)])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1}),F.value.length?(r(),o(e,{key:0,class:"list-box"},{default:n((()=>[d(e,{class:"list-header"},{default:n((()=>[i(c(a.$t("trade.text.myOrder")),1)])),_:1})])),_:1})):f("",!0),d(e,{class:"list"},{default:n((()=>[(r(!0),v(p,null,y(F.value,(t=>(r(),o(e,{class:"list-item",key:t,onClick:a=>async function(a){console.log("触发了事件！"),k({url:`/pages/asset-details/asset-details?id=${a}`})}(t.id)},{default:n((()=>[d(e,{class:"list-item-header"},{default:n((()=>[3===t.order_type?(r(),o(e,{key:0,style:{color:"#ff7d00"}},{default:n((()=>[i(c(a.$t("common.text.oneClickSmartInvestment")),1)])),_:1})):(r(),o(e,{key:1},{default:n((()=>[i(c(a.$t("common.text.dailySmartInvestment")),1)])),_:1})),d(e,{class:"mnis"},{default:n((()=>[i(c(a.$t("trade.text.orderNumber"))+c(t.order_sn),1)])),_:2},1024)])),_:2},1024),d(e,{style:{display:"flex"}},{default:n((()=>[d(e,{class:"list-item-col font-14"},{default:n((()=>[d(e,null,{default:n((()=>[i(c(t.money?t.money:0),1)])),_:2},1024),d(e,null,{default:n((()=>[i(c(a.$t("trade.text.followUpInvestmentAmount")),1)])),_:1})])),_:2},1024),d(e,{class:"list-item-col"},{default:n((()=>[d(e,null,{default:n((()=>[d(e,{class:g([t.balance&&t.balance<0?"on":""])},{default:n((()=>[i(c(m(_)(t.balance)),1)])),_:2},1032,["class"]),d(e,{class:g([t.earning_rate&&t.earning_rate<0?"on":""])},{default:n((()=>[i(c(t.earning_rate)+"%",1)])),_:2},1032,["class"])])),_:2},1024),d(e,null,{default:n((()=>[i(c(a.$t("trade.text.holdingIncome")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),O.value?(r(),o(l,{key:1,mode:"data",icon:"/static/empty/empty-data.png"})):f("",!0),O.value?f("",!0):(r(),o(x,{key:2,status:S.value,onClick:D},null,8,["status"]))])),_:1})}}}),[["__scopeId","data-v-5a40f631"]]);export{A as default};
