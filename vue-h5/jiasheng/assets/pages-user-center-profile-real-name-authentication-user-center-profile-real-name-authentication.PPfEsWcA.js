import{R as e,T as a,U as t,V as l,b2 as i,b3 as r,ae as s,x as u,D as d,H as o,Y as n,z as p,F as c,B as m,C as f,Z as _,L as v,E as g,y as h,I as b,J as x,G as y,b4 as k,v as w,b5 as C,N as L,M as j}from"./index-Sr5TDQAh.js";import{_ as F}from"./uni-nav-bar.By4fAi85.js";import{r as V}from"./uni-app.es.B63rG-5C.js";import{_ as $,a as R}from"./u-radio-group.D_OGVErn.js";import{_ as U}from"./uni-section.yeJKfGdi.js";import{_ as N}from"./u-input.C3EplMLn.js";import{_ as q,a as D}from"./u-form.CW5ng56b.js";import{_ as A}from"./u-upload.BbTb12M4.js";import{_ as B}from"./u-button.CU7Qcvp2.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.Dfj_jVd_.js";import"./uni-status-bar.vrssoW7T.js";import"./u-icon.CLEL_UCr.js";import"./u-line.CzSBNpvZ.js";import"./u-loading-icon.BJj1gzKk.js";const Z=""+new URL("id-card-front-CDseaZ7x.png",import.meta.url).href,I=""+new URL("id-card-back-Dkz4-chN.png",import.meta.url).href,S=""+new URL("passport-CYf6tEWZ.png",import.meta.url).href,z=E(Object.assign({name:"user-center-profile-real-name-authentication"},{__name:"user-center-profile-real-name-authentication",props:{id_auth:String,id_card:String},setup(E){const{t:z}=e(),J=E,P=a(),T=t([{label:z("verified.text.idCardAuthentication"),name:"idCard"},{label:z("verified.text.passportAuthentication"),name:"passport"}]),Y=l(T[0].name),G=l(),H=l({card_pic_hand:"",card_pic_back:"",passport_pic:"",auth_type:0,name:"",id_card:"",bank_card:"",examine_type:1}),K={name:{type:"string",required:!0,message:z("verified.text.tip4"),trigger:["blur","change"]},bank_card:[{type:"string",required:!0,message:z("verified.text.tip5"),trigger:["blur","change"]},{validator:(e,a,t)=>{if(/^[0-9]{16,19}$/.test(a))return!0;t(z("bankCardRecharge.text.transferCardNumberErrorTip2"))},trigger:["change","blur"]}],id_card:[{type:"string",required:!0,message:z("verified.text.tip6"),trigger:["blur","change"]},{validator:(e,a)=>"idCard"===Y.value?i.idCard(a):r(a),message:z("verified.text.tip7"),trigger:["blur","change"]}],card_pic_hand:{type:"string",required:!0,message:z("verified.text.tip8"),trigger:["blur","change"]},card_pic_back:{type:"string",required:!0,message:z("verified.text.tip9"),trigger:["blur","change"]},passport_pic:{type:"string",required:!0,message:z("verified.text.tip10"),trigger:["blur","change"]}},M=l([]),O=l([]),W=l([]);let Q=l("");async function X(e,a){const t="passportFileList"===a?M:"frontFileList"===a?O:W,l="passportFileList"===a?"passport_pic":"frontFileList"===a?"card_pic_hand":"card_pic_back";t.value=[{...e.file,status:"uploading",message:z("verified.text.uploading")}];const i=await k(e.file.url);1===Number(i.status)?(t.value=[{...e.file,status:"success",message:z("verified.text.uploadSuccessFully")}],H.value[l]=i.data.file_path):await w({title:i.message||z("verified.text.uploadFailed"),icon:"none"})}async function ee(){try{if(0===H.value.auth_type&&"0"===J.id_auth&&await G.value.validate(),0===H.value.auth_type&&"2"===J.id_auth&&""===H.value.name)return await w({title:"请填写真实姓名!",icon:"none"}),!1;if(0===H.value.auth_type&&"2"===J.id_auth&&0===O.value.length||0===H.value.auth_type&&"2"===J.id_auth&&0===W.value.length)return await w({title:"请上传完整的身份证!",icon:"none"}),!1;if(1===H.value.auth_type&&0===M.value.length)return await w({title:"请上传或护照！",icon:"none"}),!1;const{error:e,message:a}=await C(H.value);await w({title:a,icon:"none"}),e||(await P.refreshUserinfo(),_())}catch(e){e.length&&await w({title:e[0].message,icon:"none"})}}s(Y,(e=>{H.value.auth_type="idCard"===e?0:1,H.value.id_card=""}));return J.id_card&&"0"===J.id_auth?Q.value="实名中":J.id_card||"0"!==J.id_auth?"2"===J.id_auth?(Q.value="重新申请",H.value.examine_type=2):Q.value="提交申请":(Q.value="去认证",H.value.examine_type=1),(e,a)=>{const t=V(u("uni-nav-bar"),F),l=V(u("up-radio"),$),i=V(u("up-radio-group"),R),r=V(u("uni-section"),U),s=m,k=V(u("up-input"),N),w=V(u("up-form-item"),q),C=V(u("up-form"),D),E=L,z=V(u("up-upload"),A),P=V(u("up-button"),B);return f(),d(c,null,[o(t,{title:e.$t("page.title.verified"),"status-bar":"","left-icon":"left","background-color":"#F8F8F8",fixed:"",border:!1,onClickLeft:n(_)},null,8,["title","onClickLeft"]),o(s,{class:"body"},{default:p((()=>[v(o(r,{title:e.$t("verified.text.title1"),type:"line"},{default:p((()=>[o(i,{class:"radio-group",modelValue:Y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Y.value=e),placement:"row","icon-placement":"right"},{default:p((()=>[(f(!0),d(c,null,g(T,((e,a)=>(f(),h(l,{style:{flex:"1","justify-content":"center"},key:a,label:e.label,name:e.name},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["title"]),[[j,!1]]),0===H.value.auth_type&&"2"!==J.id_auth?(f(),h(r,{key:0,title:e.$t("verified.text.title2"),type:"line"},{default:p((()=>[o(s,{class:"tip-text"},{default:p((()=>[b(x(e.$t("verified.text.tip1")),1)])),_:1}),o(C,{class:"plr-30","label-width":"120",labelPosition:"top",model:H.value,rules:K,ref_key:"formRef",ref:G},{default:p((()=>[o(w,{"left-icon":"account",label:e.$t("verified.text.actualName"),prop:"name",borderBottom:"",ref:"item1"},{default:p((()=>[o(k,{modelValue:H.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value.name=e),placeholder:K.name.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(w,{"left-icon":"lock",label:e.$t("verified.text.idNumber"),prop:"id_card",borderBottom:"",ref:"item1"},{default:p((()=>[o(k,{type:"idcard",modelValue:H.value.id_card,"onUpdate:modelValue":a[2]||(a[2]=e=>H.value.id_card=e),placeholder:K.id_card[0].message},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),o(w,{"left-icon":"lock",label:e.$t("verified.text.bankCardNumber"),prop:"bank_card",borderBottom:"",ref:"item1"},{default:p((()=>[o(k,{type:"idcard",modelValue:H.value.bank_card,"onUpdate:modelValue":a[3]||(a[3]=e=>H.value.bank_card=e),placeholder:K.bank_card[0].message},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title"])):y("",!0),"idCard"===Y.value&&"2"===J.id_auth?(f(),h(r,{key:1,title:"请上传身份证的正反面",type:"line",padding:"30rpx"},{default:p((()=>[o(C,{"label-width":"120",labelPosition:"top",model:H.value},{default:p((()=>[o(w,{"left-icon":"account",label:e.$t("verified.text.actualName"),prop:"name",borderBottom:"",ref:"item1"},{default:p((()=>[o(k,{modelValue:H.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>H.value.name=e),placeholder:K.name.message},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),o(s,{class:"uploads"},{default:p((()=>[o(z,{class:"uploads-item",width:"750rpx",fileList:O.value,onAfterRead:a[5]||(a[5]=e=>X(e,"frontFileList")),onDelete:a[6]||(a[6]=e=>O.value=[]),name:"url",maxCount:1},{default:p((()=>[o(s,{class:"uploads-item-content"},{default:p((()=>[o(s,{class:"uploads-item__info"},{default:p((()=>[o(s,{class:"font"},{default:p((()=>[b("头像面")])),_:1}),o(s,{class:"font-12 mt-10"},{default:p((()=>[b("上传你的身份证头像面")])),_:1})])),_:1}),o(E,{class:"uploads-item__image",src:Z,mode:"widthFix"})])),_:1})])),_:1},8,["fileList"]),o(z,{class:"uploads-item mt-20",width:"750rpx",fileList:W.value,onAfterRead:a[7]||(a[7]=e=>X(e,"backFileList")),onDelete:a[8]||(a[8]=e=>W.value=[]),name:"url",maxCount:1},{default:p((()=>[o(s,{class:"uploads-item-content"},{default:p((()=>[o(s,{class:"uploads-item__info"},{default:p((()=>[o(s,{class:"font-14"},{default:p((()=>[b("国徽面")])),_:1}),o(s,{class:"font-12 mt-10"},{default:p((()=>[b("上传你的身份证国徽面")])),_:1})])),_:1}),o(E,{class:"uploads-item__image",src:I,mode:"widthFix"})])),_:1})])),_:1},8,["fileList"])])),_:1})])),_:1})):y("",!0),1===H.value.auth_type?(f(),h(r,{key:2,title:e.$t("verified.text.tip10"),type:"line",padding:"30rpx"},{default:p((()=>[o(s,{class:"passport-wrapper"},{default:p((()=>[o(s,{class:"font-24-000"},{default:p((()=>[b(x(e.$t("verified.text.tip2")),1)])),_:1}),o(s,{class:"font-12"},{default:p((()=>[b(x(e.$t("verified.text.tip3")),1)])),_:1}),o(z,{width:"564rpx",height:"368rpx",class:"passport-content mt-50",fileList:M.value,onAfterRead:a[9]||(a[9]=e=>X(e,"passportFileList")),onDelete:a[10]||(a[10]=e=>M.value=[]),name:"url",maxCount:1},{default:p((()=>[o(E,{class:"passport-image",src:S,mode:"widthFix"})])),_:1},8,["fileList"])])),_:1})])),_:1},8,["title"])):y("",!0),o(s,{class:"mt-100 p-30"},{default:p((()=>[o(P,{text:n(Q),type:"primary",onClick:ee},null,8,["text"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-871613d4"]]);export{z as default};
