import{T as a,V as t,ai as e,ae as l,x as s,y as o,z as n,A as u,C as r,H as i,I as d,J as c,Y as m,ar as _,G as f,D as v,E as y,F as p,q as x,B as g,r as k}from"./index-CRttwwij.js";import{_ as b}from"./u-empty.fbOuqZBq.js";import{o as $,a as h,r as j}from"./uni-app.es.otF8raCd.js";import{_ as I}from"./u-loadmore.CnALoBYK.js";import{e as w}from"./index.CgRNu-Dw.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.CVzxT_4w.js";import"./u-line.C5lrB_C7.js";import"./u-loading-icon.Cvek95z1.js";const A=C(Object.assign({name:"trade"},{__name:"trade",setup(C){const A=a(),U=t([]),F=t(0),O=t(0),N=t(0),S=t(1),T=t(!1),q=t("loadmore"),z=t(0);async function B(){q.value="loading";const{error:a,message:t,data:e}=await w({type:1,page:S.value});if(!a)return{data:e,error:a};await x({title:t,icon:"none"})}async function D(){S.value=1;const{error:a,data:t}=await B();a?q.value="error":(U.value=t.list.data,T.value=!t.list.data.length,q.value=U.value.length<10?"nomore":"loadmore",F.value=t.statistics.total_hold_money,O.value=t.statistics.total_hold_income,N.value=t.statistics.total_yesterday_income,z.value=t.statistics.total_amount_available)}async function E(){if("nomore"===q.value)return;S.value++;const{data:a,error:t}=await B();t?q.value="error":a.length?(q.value="loadmore",U.value=U.value.concat(a)):q.value="nomore"}return $((async()=>{await D(),e()})),h(E),D(),l((()=>A.token),(a=>{a&&D()})),(a,t)=>{const e=r,l=j(s("up-empty"),b),x=j(s("up-loadmore"),I);return o(),n(e,{class:"root"},{default:u((()=>[i(e,{class:"red-block"},{default:u((()=>[i(e,{class:"font-12-inverse"},{default:u((()=>[d(c(a.$t("trade.text.amountAvailable"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),i(e,{class:"font-30-inverse"},{default:u((()=>[d(c(z.value.toFixed(2)),1)])),_:1}),i(e,{class:"data-row"},{default:u((()=>[i(e,{class:"data-item"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(a.$t("trade.text.totalInvestmentAmount"))+"("+c(a.$t("common.text.currencyUnit"))+")",1)])),_:1}),i(e,null,{default:u((()=>[d(c(Number(F.value).toFixed(2)),1)])),_:1})])),_:1}),i(e,{class:"data-item"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(a.$t("trade.text.cumulativeIncome")),1)])),_:1}),m(_)(O.value)>0?(o(),n(e,{key:0},{default:u((()=>[d(c(m(_)(O.value)),1)])),_:1})):f("",!0),m(_)(O.value)<0?(o(),n(e,{key:1,style:{color:"rgb(6, 159, 23)"}},{default:u((()=>[d(c(m(_)(O.value)),1)])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1}),U.value.length?(o(),n(e,{key:0,class:"list-box"},{default:u((()=>[i(e,{class:"list-header"},{default:u((()=>[d(c(a.$t("trade.text.myOrder")),1)])),_:1})])),_:1})):f("",!0),i(e,{class:"list"},{default:u((()=>[(o(!0),v(p,null,y(U.value,(t=>(o(),n(e,{class:"list-item",key:t,onClick:a=>async function(a){console.log("触发了事件！"),k({url:`/pages/asset-details/asset-details?id=${a}`})}(t.id)},{default:u((()=>[i(e,{class:"list-item-header"},{default:u((()=>[3===t.order_type?(o(),n(e,{key:0,style:{color:"#ff7d00"}},{default:u((()=>[d(c(a.$t("common.text.oneClickSmartInvestment")),1)])),_:1})):(o(),n(e,{key:1},{default:u((()=>[d(c(a.$t("common.text.dailySmartInvestment")),1)])),_:1})),i(e,{class:"mnis"},{default:u((()=>[d(c(a.$t("trade.text.orderNumber"))+c(t.order_sn),1)])),_:2},1024)])),_:2},1024),i(e,{style:{display:"flex"}},{default:u((()=>[i(e,{class:"list-item-col font-14"},{default:u((()=>[i(e,null,{default:u((()=>[d(c(t.money?t.money:0),1)])),_:2},1024),i(e,null,{default:u((()=>[d(c(a.$t("trade.text.followUpInvestmentAmount")),1)])),_:1})])),_:2},1024),i(e,{class:"list-item-col"},{default:u((()=>[i(e,null,{default:u((()=>[i(e,{class:g([t.balance&&t.balance<0?"on":""])},{default:u((()=>[d(c(m(_)(t.balance)),1)])),_:2},1032,["class"]),i(e,{class:g([t.earning_rate&&t.earning_rate<0?"on":""])},{default:u((()=>[d(c(t.earning_rate)+"%",1)])),_:2},1032,["class"])])),_:2},1024),i(e,null,{default:u((()=>[d(c(a.$t("trade.text.holdingIncome")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),T.value?(o(),n(l,{key:1,mode:"data",icon:"/static/empty/empty-data.png"})):f("",!0),T.value?f("",!0):(o(),n(x,{key:2,status:q.value,onClick:E},null,8,["status"]))])),_:1})}}}),[["__scopeId","data-v-09606a2b"]]);export{A as default};
